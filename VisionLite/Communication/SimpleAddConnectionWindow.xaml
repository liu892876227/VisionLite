<!--Communication/SimpleAddConnectionWindow.xaml-->
<!--简化的添加通讯连接窗口-->
<Window x:Class="VisionLite.Communication.SimpleAddConnectionWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="添加通讯连接" Height="550" Width="450"
        WindowStartupLocation="CenterOwner" ShowInTaskbar="False"
        ResizeMode="CanResize" MinHeight="450" MinWidth="400">
    
    <!-- 窗口样式 -->
    <Window.Resources>
        <Style x:Key="LabelStyle" TargetType="Label">
            <Setter Property="Width" Value="80"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,5,10,5"/>
        </Style>
        
        <Style x:Key="InputStyle" TargetType="TextBox">
            <Setter Property="Height" Value="25"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,5"/>
            <Setter Property="Padding" Value="5,0"/>
        </Style>
        
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="80"/>
            <Setter Property="Height" Value="28"/>
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>   <!-- 基本信息 -->
            <RowDefinition Height="Auto"/>   <!-- 协议选择 -->
            <RowDefinition Height="*"/>      <!-- 参数配置 -->
            <RowDefinition Height="Auto"/>   <!-- 操作按钮 -->
        </Grid.RowDefinitions>

        <!-- 连接名称 -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <Label Grid.Column="0" Content="连接名称:" Style="{StaticResource LabelStyle}"/>
            <TextBox x:Name="ConnectionNameTextBox" Grid.Column="1" 
                     Style="{StaticResource InputStyle}"
                     TextChanged="ConnectionNameTextBox_TextChanged"/>
        </Grid>

        <!-- 协议类型 -->
        <Grid Grid.Row="1" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <Label Grid.Column="0" Content="协议类型:" Style="{StaticResource LabelStyle}"/>
            <ComboBox x:Name="ProtocolTypeComboBox" Grid.Column="1"
                      Height="25" VerticalAlignment="Center" Margin="0,5"
                      SelectionChanged="ProtocolTypeComboBox_SelectionChanged">
                <ComboBoxItem Content="TCP客户端" Tag="TcpClient"/>
                <ComboBoxItem Content="TCP服务器" Tag="TcpServer"/>
                <ComboBoxItem Content="UDP客户端" Tag="UdpClient"/>
                <ComboBoxItem Content="UDP服务器" Tag="UdpServer"/>
                <ComboBoxItem Content="ModbusTCP服务器" Tag="ModbusTcpServer"/>
                <ComboBoxItem Content="ModbusTCP客户端" Tag="ModbusTcpClient"/>
            </ComboBox>
        </Grid>

        <!-- 参数配置区域 -->
        <GroupBox Grid.Row="2" Header="连接参数" Margin="0,0,0,10" Padding="10">
            <ScrollViewer VerticalScrollBarVisibility="Auto" 
                          HorizontalScrollBarVisibility="Disabled">
                <Grid x:Name="ParameterGrid">
                    <!-- 动态内容将在这里显示 -->
                </Grid>
            </ScrollViewer>
        </GroupBox>

        <!-- 操作按钮 -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" 
                    HorizontalAlignment="Right">
            
            <!-- 测试连接按钮 -->
            <Button x:Name="TestButton" Content="测试连接" 
                    Style="{StaticResource ButtonStyle}"
                    Click="TestButton_Click" 
                    IsEnabled="False"/>
            
            <!-- 确定按钮 -->
            <Button x:Name="OKButton" Content="确定" 
                    Style="{StaticResource ButtonStyle}"
                    Click="OKButton_Click" IsDefault="True" 
                    IsEnabled="False"/>
            
            <!-- 取消按钮 -->
            <Button x:Name="CancelButton" Content="取消" 
                    Style="{StaticResource ButtonStyle}"
                    Click="CancelButton_Click" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>